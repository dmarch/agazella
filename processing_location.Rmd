---
title: "Processing of location data"
output: html_notebook
---



# Load functions

```{r}
source("scr/fun_data_processing.R")
```



# Data preparation

Import raw data from Sirtrack

```{r}
file <- "data/telemetriaTodos.csv"
raw <- read_sirtrack(file)
table(raw$ptt)
```

Import data processed by Lluis Cardona. This data contains habitat classification using Google Earth imagery (1=land;2=water;3=ice), and has been filtered by time after deployment date.

```{r}
file <- "data/TelemetriaPPT.xlsx"
cardona <- read_agazella(file)  # takes time
table(cardona$ptt)
```


Data processed by Cardona has excluded one tag (PTT 64529) and reduced number of fixes (eg. pre-deployment dates). Use this dataset to combine with raw data

```{r}
data <- merge(cardona, raw, by=c("ptt", "date"), all.x=TRUE)
```


There is a problem: raw data and Excel data may differ in seconds. see example:

6579:64487,6579:64487,2019-02-22,03:28:11,-63.0028,-60.55674,B,,,,,,,,,,,,,,,,,,,,,,,,,,,,

This prevents to combine both sources of data.




joined <- left_join(cardona, raw, by = c("ptt" = "ptt", "date" = "date"))


df <- filter(raw, ptt==64487)

